import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as s,o as t}from"./app-BkictbZ-.js";const n="/assets/image-20250518191948522-d7ChrjP0.png",r="/assets/image-20250518192149472-DqJuZIlG.png",p="/assets/image-20250518192239600-BGRbyV9j.png",l="/assets/image-20250518193907252-DKm8yXSf.png",d="/assets/image-20250518194152354-Clexp-KA.png",o="/assets/image-20250519124130518-DceomP98.png",c="/assets/image-20250519124318341-jHTCqi5_.png",h="/assets/image-20250519124415802-DNEgqOVT.png",u="/assets/image-20250519124520689-BCGbHEgG.png",m={};function g(b,e){return t(),a("div",null,e[0]||(e[0]=[s('<h1 id="msl-oauth-2-0" tabindex="-1"><a class="header-anchor" href="#msl-oauth-2-0"><span>MSL OAuth 2.0</span></a></h1><div class="hint-container tip"><p class="hint-container-title">TIPS</p><p>此处介绍的开发者将自己的服务接入MSL统一身份验证（即MSL用户中心服务）第三方登录<br> 若您并不知道什么意思，那就别看啦~</p></div><h2 id="_1-申请oauth-app" tabindex="-1"><a class="header-anchor" href="#_1-申请oauth-app"><span>1.申请OAuth App</span></a></h2><p>进入MSL用户中心-<a href="https://user.mslmc.net/user/oauth" target="_blank" rel="noopener noreferrer">OAuth App管理页面</a> 点击添加应用</p><figure><img src="'+n+'" alt="image-20250518191948522" tabindex="0" loading="lazy"><figcaption>image-20250518191948522</figcaption></figure><p>填写应用的名字，图标（推荐正方形，需要是可以外部访问的url地址），以及您的App的回调地址。</p><figure><img src="'+r+'" alt="image-20250518192149472" tabindex="0" loading="lazy"><figcaption>image-20250518192149472</figcaption></figure><p>点击确定后，会返回您的App客户端ID以及密钥信息。</p><div class="hint-container important"><p class="hint-container-title">注意</p><p>请妥善保管您的密钥，密钥仅会显示一次。 后续若忘记密钥就只能重置了。</p></div><figure><img src="'+p+'" alt="image-20250518192239600" tabindex="0" loading="lazy"><figcaption>image-20250518192239600</figcaption></figure><figure><img src="'+l+'" alt="image-20250518193907252" tabindex="0" loading="lazy"><figcaption>image-20250518193907252</figcaption></figure><div class="hint-container info"><p class="hint-container-title">审核</p><p>添加App后会进入待审核状态，请联系管理员审核。 否则App无法正常调用哦！</p></div><h2 id="_2-oauth流程" tabindex="-1"><a class="header-anchor" href="#_2-oauth流程"><span>2.OAuth流程</span></a></h2><div class="hint-container tip"><p class="hint-container-title">OAuth 2.0</p><p><a href="https://oauth.net/2/" target="_blank" rel="noopener noreferrer">OAuth2</a><br> MSL统一身份验证基于OAuth2的授权码模式规范设计<br> 若有出入，请联系反馈~</p></div><h3 id="_1请求获取授权码-跳转msl用户中心授权" tabindex="-1"><a class="header-anchor" href="#_1请求获取授权码-跳转msl用户中心授权"><span>①请求获取授权码（跳转MSL用户中心授权）</span></a></h3><p>请求授权地址：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://user.mslmc.net/oauth/authorize</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查询参数:</p><table><thead><tr><th>参数</th><th style="text-align:center;">示例值</th><th style="text-align:center;">必需</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td>client_id</td><td style="text-align:center;">NeQ5v7T72vm4Yi6ADyYAW6m4eVK</td><td style="text-align:center;">必需</td><td style="text-align:center;">客户端ID（第一步申请得到的）</td></tr><tr><td>state</td><td style="text-align:center;">SiGEWINNEQWQ</td><td style="text-align:center;">非必需 但强烈建议</td><td style="text-align:center;">随机字符串，防止CSRF，请求方应当生成并记录此字符串，用于后续验证</td></tr><tr><td>redirect_uri</td><td style="text-align:center;">https://api.mslmc.cn/api/callback</td><td style="text-align:center;">非必需 但强烈建议</td><td style="text-align:center;">登录成功后重新向的地址（一般是编码的地址），若不传此参数则读取App设置的URI地址</td></tr></tbody></table><p>示例拼接地址:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://user.mslmc.net/oauth/authorize?client_id=NeQ5v7T72vm4Yi6ADyYAW6m4eVK&amp;state=SiGEWINNEQWQ&amp;redirect_uri=https%3a%2f%2fapi.mslmc.cn%2fapi%2fcallback</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">最小示例拼接地址</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://user.mslmc.net/oauth/authorize?client_id=NeQ5v7T72vm4Yi6ADyYAW6m4eVK</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>但是<strong>不建议</strong>这么做，缺少<code>state</code>参数可能会导致一些风险哦~</p></div><p>若地址正确，访问后应该是如下页面:</p><figure><img src="'+d+`" alt="image-20250518194152354" tabindex="0" loading="lazy"><figcaption>image-20250518194152354</figcaption></figure><h3 id="_2使用授权码交换accesstoken" tabindex="-1"><a class="header-anchor" href="#_2使用授权码交换accesstoken"><span>②使用授权码交换AccessToken</span></a></h3><p>登录成功后，MSL用户中心将根据填写的App回调地址重定向并添加<code>code</code>和<code>state</code>参数（方法是GET）</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p><code>code</code>有效期只有10分钟。</p></div><p>MSL用户中心授权成功的重定向示例:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://api.mslmc.cn/api/callback?code=y94vzbhskzcizEDmJMbWt775tbI&amp;state=iGEWINNEQWQ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>您的客户端接收到回调后应该核对<code>state</code>是否与请求时的一致，若不一致，请拒绝登录请求。</p><p>然后需要用拿到的code通过api交换得到AccessToken</p><p>POST <code>application/x-www-form-urlencoded</code> 或者 <code>application/json</code></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://user.mslmc.net/api/oauth/exchangeAccessToken</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><table><thead><tr><th>参数</th><th>示例值</th><th>说明</th></tr></thead><tbody><tr><td>code</td><td>y94vzbhskzcizEDmJMbWt775tbI</td><td>回调拿到的授权码</td></tr><tr><td>client_id</td><td>NeQ5v7T72vm4Yi6ADyYAW6m4eVK</td><td>您在第一步申请的客户端ID</td></tr><tr><td>client_secret</td><td>FAOFoGDPtTK8Yudlerv...</td><td>您在第一步申请的客户端密钥</td></tr></tbody></table><p>返回示例:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>  &quot;code&quot;: 200,</span></span>
<span class="line"><span>  &quot;msg&quot;: &quot;授权成功&quot;,</span></span>
<span class="line"><span>  &quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjEsImlhdCI6MTc0NzU1NzY3MiwiZXhwIjoxNzQ3NTYxMjcyfQ.iyX0dIXxrUkr6Dg7HCZ7YNQb2G1u5EYpzh-6wKYJShg&quot;,</span></span>
<span class="line"><span>  &quot;expires_in&quot;: 3600,</span></span>
<span class="line"><span>  &quot;token_type&quot;: &quot;Bearer&quot;,</span></span>
<span class="line"><span>  &quot;scope&quot;: &quot;user_info&quot;</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取到<code>access_token</code>即可</p><p>此api文档: <a href="https://apidoc-user.mslmc.cn/297247077e0" target="_blank" rel="noopener noreferrer">获取Access Token - MSL-User-System</a></p><h3 id="_3获取用户信息" tabindex="-1"><a class="header-anchor" href="#_3获取用户信息"><span>③获取用户信息</span></a></h3><p>GET</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>https://user.mslmc.net/api/oauth/user</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>需要添加<code>Authorization</code>请求头</p><p>在 Header 添加参数 Authorization，其值为在 Bearer 之后拼接 Token 示例:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOjEsImlhdCI6MTc0NzU1NzY3MiwiZXhwIjoxNzQ3NTYxMjcyfQ.iyX0dIXxrUkr6Dg7HCZ7YNQb2G1u5EYpzh-6wKYJShg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>返回示例:</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>  &quot;code&quot;: 200,</span></span>
<span class="line"><span>  &quot;msg&quot;: &quot;获取用户信息成功&quot;,</span></span>
<span class="line"><span>  &quot;uid&quot;: 1,</span></span>
<span class="line"><span>  &quot;username&quot;: &quot;小可爱&quot;,</span></span>
<span class="line"><span>  &quot;email&quot;: &quot;user@mslmc.cn&quot;,</span></span>
<span class="line"><span>  &quot;qq&quot;: null,</span></span>
<span class="line"><span>  &quot;score&quot;: 1500,</span></span>
<span class="line"><span>  &quot;avatar&quot;: &quot;https://cravatar.cn/avatar/d31946d60f6051840edc9d41a1261?d=identicon&amp;s=640&quot;,</span></span>
<span class="line"><span>  &quot;regTime&quot;: 1737992780,</span></span>
<span class="line"><span>  &quot;lastLoginTime&quot;: 1745988703,</span></span>
<span class="line"><span>  &quot;permission&quot;: 1,</span></span>
<span class="line"><span>  &quot;realName&quot;: false,</span></span>
<span class="line"><span>  &quot;lastCheckInTime&quot;: null,</span></span>
<span class="line"><span>  &quot;twoFactorAuth&quot;: true</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请使用<code>uid</code>字段作为判断用户绑定的参数，这是每位用户唯一的ID，且不会变化。</p><p>其他的信息按需使用/更新即可。</p><p>此api文档: <a href="https://apidoc-user.mslmc.cn/297251390e0" target="_blank" rel="noopener noreferrer">获取用户信息 - MSL-User-System</a></p><h2 id="_3-快速接入msl登录" tabindex="-1"><a class="header-anchor" href="#_3-快速接入msl登录"><span>3.快速接入MSL登录</span></a></h2><h3 id="接入到wordpress" tabindex="-1"><a class="header-anchor" href="#接入到wordpress"><span># 接入到WordPress</span></a></h3><p>使用此插件: <a href="https://github.com/luluxiaoyu/MSL-OAuth2-WordPress/releases" target="_blank" rel="noopener noreferrer">Releases · luluxiaoyu/MSL-OAuth2-WordPress</a></p><p>下载zip，并在您的wordpress上安装并启用插件。</p><figure><img src="`+o+'" alt="image-20250519124130518" tabindex="0" loading="lazy"><figcaption>image-20250519124130518</figcaption></figure><p>在插件设置填写OAuth App信息:</p><figure><img src="'+c+'" alt="image-20250519124318341" tabindex="0" loading="lazy"><figcaption>image-20250519124318341</figcaption></figure><p>回调地址要填写到OAuth App信息中</p><figure><img src="'+h+'" alt="image-20250519124415802" tabindex="0" loading="lazy"><figcaption>image-20250519124415802</figcaption></figure><p>两边的信息配置好后，即可进入个人资料页面绑定MSL账户，绑定后即可使用MSL账户快速登录~</p><figure><img src="'+u+'" alt="image-20250519124520689" tabindex="0" loading="lazy"><figcaption>image-20250519124520689</figcaption></figure>',60)]))}const A=i(m,[["render",g]]),f=JSON.parse('{"path":"/docs/other/oauth2.html","title":"MSL OAuth 2.0","lang":"zh-CN","frontmatter":{"icon":"arrow-right-to-bracket","description":"MSL OAuth 2.0 TIPS 此处介绍的开发者将自己的服务接入MSL统一身份验证（即MSL用户中心服务）第三方登录 若您并不知道什么意思，那就别看啦~ 1.申请OAuth App 进入MSL用户中心-OAuth App管理页面 点击添加应用 image-20250518191948522image-20250518191948522 填写应用的...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MSL OAuth 2.0\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-26T13:25:43.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"MSLDev\\",\\"url\\":\\"https://github.com/MSLTeam/\\"}]}"],["meta",{"property":"og:url","content":"https://www.mslmc.cn/docs/other/oauth2.html"}],["meta",{"property":"og:site_name","content":"Minecraft Server Launcher - MSL开服器"}],["meta",{"property":"og:title","content":"MSL OAuth 2.0"}],["meta",{"property":"og:description","content":"MSL OAuth 2.0 TIPS 此处介绍的开发者将自己的服务接入MSL统一身份验证（即MSL用户中心服务）第三方登录 若您并不知道什么意思，那就别看啦~ 1.申请OAuth App 进入MSL用户中心-OAuth App管理页面 点击添加应用 image-20250518191948522image-20250518191948522 填写应用的..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-26T13:25:43.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-26T13:25:43.000Z"}]]},"git":{"createdTime":1747570167000,"updatedTime":1748265943000,"contributors":[{"name":"luluxiaoyu","username":"luluxiaoyu","email":"ljy.xiaoyu@qq.com","commits":9,"url":"https://github.com/luluxiaoyu"}]},"readingTime":{"minutes":3.22,"words":967},"filePathRelative":"docs/other/oauth2.md","autoDesc":true,"excerpt":"\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">TIPS</p>\\n<p>此处介绍的开发者将自己的服务接入MSL统一身份验证（即MSL用户中心服务）第三方登录<br>\\n若您并不知道什么意思，那就别看啦~</p>\\n</div>\\n<h2>1.申请OAuth App</h2>\\n<p>进入MSL用户中心-<a href=\\"https://user.mslmc.net/user/oauth\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">OAuth App管理页面</a> 点击添加应用</p>"}');export{A as comp,f as data};
